<!doctype html><html lang="en"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1"><title>GEOCLOUD4AQI</title><link rel="stylesheet" href="https://unpkg.com/leaflet@1.7.1/dist/leaflet.css"/><style>body{font-family:Arial,sans-serif;margin:0;padding:0;transition:background-color .5s,color .5s}body.dark-mode{background-color:#121212;color:#fff}#map{height:400px;margin-bottom:20px}#searchBar{margin:20px 0;text-align:center}#cityInput{padding:10px;font-size:16px;border:1px solid #ccc;border-radius:5px}button{padding:10px 20px;font-size:16px;background-color:#007bff;color:#fff;border:none;border-radius:5px;cursor:pointer}button:hover{background-color:#0056b3}.dark-mode-toggle{position:fixed;top:20px;right:20px;display:flex;align-items:center}.switch{position:relative;display:inline-block;width:60px;height:34px}.switch input{opacity:0;width:0;height:0}.slider{position:absolute;cursor:pointer;top:0;left:0;right:0;bottom:0;background-color:#ccc;transition:.4s;border-radius:34px}.slider:before{position:absolute;content:"";height:26px;width:26px;left:4px;bottom:4px;background-color:#fff;transition:.4s;border-radius:50%}input:checked+.slider{background-color:#007bff}input:checked+.slider:before{transform:translateX(26px)}#aqiLegend{position:absolute;bottom:20px;left:20px;background:rgba(255,255,255,.8);padding:10px;border-radius:5px;box-shadow:0 0 10px rgba(0,0,0,.1);z-index:1000}.dark-mode #aqiLegend{background:rgba(0,0,0,.8);color:#fff}.aqi-color{display:inline-block;width:20px;height:20px;margin-right:5px;border-radius:50%}.aqi-label{font-size:12px}#aqiDashboard{padding:20px;background:#f9f9f9;border-radius:5px;margin:20px 0}.dark-mode #aqiDashboard{background:#333;color:#fff}#aqiDashboard h2{margin-top:0}#aqiDashboard p{margin:5px 0}footer{text-align:center;padding:20px;background-color:#f1f1f1;margin-top:20px;font-size:14px;color:#333}.dark-mode footer{background-color:#333;color:#fff}footer a{color:#007bff;text-decoration:none}footer a:hover{text-decoration:underline}</style><script defer="defer" src="/static/js/main.16529677.js"></script></head><body><div class="dark-mode-toggle"><label class="switch"><input type="checkbox" onclick="toggleDarkMode()"> <span class="slider"></span></label></div><h1>GEOCLOUD4AQI: Air Quality Index</h1><div id="searchBar"><input id="stateInput" placeholder="Enter state name"> <button onclick="fetchAQIForState()">Search</button></div><div id="map"></div><div id="aqiLegend"><div><span class="aqi-color" style="background:green"></span><span class="aqi-label">Good (0-50)</span></div><div><span class="aqi-color" style="background:#ff0"></span><span class="aqi-label">Moderate (51-100)</span></div><div><span class="aqi-color" style="background:orange"></span><span class="aqi-label">Unhealthy for Sensitive Groups (101-150)</span></div><div><span class="aqi-color" style="background:red"></span><span class="aqi-label">Unhealthy (151-200)</span></div><div><span class="aqi-color" style="background:purple"></span><span class="aqi-label">Very Unhealthy (201-300)</span></div><div><span class="aqi-color" style="background:maroon"></span><span class="aqi-label">Hazardous (301+)</span></div></div><div id="aqiDashboard"><h2>AQI Dashboard</h2><div id="aqiResults"></div></div><footer><p>Â© 2023 GEOCLOUD4AQI. All rights reserved.</p><p>Powered by <a href="https://openaq.org/" target="_blank">OpenAQ</a></p></footer><script src="https://unpkg.com/leaflet@1.7.1/dist/leaflet.js"></script><script src="https://cdn.jsdelivr.net/npm/leaflet.heat@0.2.0/dist/leaflet-heat.js"></script><script>var map=L.map("map").setView([20.5937,78.9629],5);L.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{maxZoom:18}).addTo(map);var heatmapData=[],heatmapLayer=L.heatLayer(heatmapData,{radius:25,blur:15,maxZoom:17}).addTo(map);async function fetchAQIForState(){const a=document.getElementById("stateInput").value;try{const t=await fetch(`http://127.0.0.1:5000/aqi/${a}`),e=await t.json();t.ok?displayAQIData(e):alert("State not found or error fetching data.")}catch(a){console.error("Error fetching AQI:",a),alert("Failed to fetch AQI data. Please try again.")}}function displayAQIData(a){map.eachLayer((a=>{a instanceof L.Marker&&map.removeLayer(a)})),heatmapData=[];const t=document.getElementById("aqiResults");t.innerHTML="",a.forEach((a=>{const{city:e,aqi:o,lat:n,lng:r,dominant_pollutant:m}=a;L.marker([n,r]).addTo(map).bindPopup(`${e} AQI: ${o}`),heatmapData.push([n,r,o]),t.innerHTML+=`\n                    <div>\n                        <p><strong>${e}</strong>: AQI ${o} (${m})</p>\n                    </div>\n                `})),heatmapLayer.setLatLngs(heatmapData)}function toggleDarkMode(){document.body.classList.toggle("dark-mode")}fetchAQIForState()</script></body></html>